window.__require=function e(t,i,n){function o(s,r){if(!i[s]){if(!t[s]){var a=s.split("/");if(a=a[a.length-1],!t[a]){var h="function"==typeof __require&&__require;if(!r&&h)return h(a,!0);if(c)return c(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var l=i[s]={exports:{}};t[s][0].call(l.exports,function(e){return o(t[s][1][e]||e)},l,l.exports,e,t,i,n)}return i[s].exports}for(var c="function"==typeof __require&&__require,s=0;s<n.length;s++)o(n[s]);return o}({bullet:[function(e,t,i){"use strict";cc._RF.push(t,"e9083CoVfZG4qQHfd/RIiXc","bullet"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onCollisionEnter:function(e,t){1==t.tag&&game.onBulletKilled(this.node)},update:function(e){this.node.y=this.node.y+15,this.node.y>=736&&game.onBulletKilled(this.node)}}),cc._RF.pop()},{}],cancer2:[function(e,t,i){"use strict";cc._RF.push(t,"cb690IQladD5qTHcHPo2BG4","cancer2"),cc.Class({extends:cc.Component,properties:{score:{default:0,type:cc.Integer,tooltip:"\u83b7\u5f97\u7684\u5206\u6570"},HP:{default:0,type:cc.Integer,tooltip:"\u8840\u91cf"},tcancerm:{default:null,type:cc.AudioClip},ttc:{default:null,type:cc.AudioClip}},onCollisionEnter:function(e,t){if(1==e.tag){if(this.HP>0)return this.HP--,this.getComponent(cc.Animation).play("cdie2"),void cc.audioEngine.playEffect(this.ttc,!1);if(0==this.HP){this.HP--;var i=this.getComponent(cc.Animation);if(i.play("tcdie"),i.on("finished",this.onFinished,this),cc.audioEngine.playEffect(this.tcancerm,!1),this.HP<0)return void game.gainScore(this.score)}}},onFinished:function(){this.node.destroy()},update:function(e){this.node.y=this.node.y-4,this.node.y<=-770&&game.onCancer2Killed(this.node)}}),cc._RF.pop()},{}],cancer:[function(e,t,i){"use strict";cc._RF.push(t,"43eb6C3NB1GQon4fHirsJs4","cancer"),cc.Class({extends:cc.Component,properties:{score:{default:0,type:cc.Integer,tooltip:"\u83b7\u5f97\u7684\u5206\u6570"},HP:{default:0,type:cc.Integer,tooltip:"\u8840\u91cf"},cancerm:{default:null,type:cc.AudioClip}},onCollisionEnter:function(e,t){if(1==e.tag&&0===this.HP){this.HP--;var i=this.getComponent(cc.Animation);return i.play("cdie"),i.on("finished",this.onFinished,this),cc.audioEngine.playEffect(this.cancerm,!1),void(this.HP<0&&game.gainScore(this.score))}},onFinished:function(){this.node.destroy()},update:function(e){this.node.y=this.node.y-8,this.node.y<=-766&&game.onCancerKilled(this.node)}}),cc._RF.pop()},{}],game:[function(e,t,i){"use strict";cc._RF.push(t,"150e5msewZKGYrcGbTkpK3t","game"),cc.Class({extends:cc.Component,properties:{bg1:cc.Node,bg2:cc.Node,hero:cc.Node,bullet:cc.Prefab,cancer:cc.Prefab,cancer2:cc.Prefab,scoreDisplay:cc.Label,bgm:{default:null,type:cc.AudioClip}},onLoad:function(){window.game=this,this.bg1.y=0,this.bg2.y=this.bg1.y+this.bg1.height,this.setTouch(),this.bulletTime=0,this.bulletPool=new cc.NodePool,this.cancerTime=0,this.cancerPool=new cc.NodePool,this.cancer2Time=0,this.cancer2Pool=new cc.NodePool,this.score=0,this.scoreDisplay.string=this.score,this.current=cc.audioEngine.play(this.bgm,!0,.3)},start:function(){cc.director.getCollisionManager().enabled=!0},setHero:function(){this.hero.x>this.hero.parent.width/2?this.hero.x=this.hero.parent.width/2:this.hero.x<-this.hero.parent.width/2&&(this.hero.x=-this.hero.parent.width/2),this.hero.y>this.hero.parent.height/2?this.hero.y=this.hero.parent.height/2:this.hero.y<-this.hero.parent.height/2&&(this.hero.y=-this.hero.parent.height/2)},setTouch:function(){this.node.on("touchmove",function(e){console.log("touchmove");var t=this.hero.getPosition(),i=e.getDelta();this.hero.setPosition(cc.v2(t.x-i.x,t.y-i.y)),cc.log(i)},this)},setBg:function(){this.bg1.y=this.bg1.y-2,this.bg2.y=this.bg2.y-2,this.bg1.y<=-this.bg1.height&&(this.bg1.y=this.bg2.y+this.bg1.height),this.bg2.y<=-this.bg1.height&&(this.bg2.y=this.bg1.y+this.bg1.height)},createBullet:function(){var e=null;(e=this.bulletPool.size()>0?this.bulletPool.get():cc.instantiate(this.bullet)).parent=this.node;var t=this.hero.getPosition();e.setPosition(cc.v2(t.x,t.y+this.hero.height/2+5))},onBulletKilled:function(e){this.bulletPool.put(e)},removeAllBullet:function(){for(var e=this.node.children,t=e.length-1;t>=0;t--){e[t].getComponent("bullet")&&this.onBulletKilled(e[t])}},getCancerPosition:function(){var e,t=this.node.y+Math.random()*this.node.height/2,i=this.node.width;return e=(Math.random()-.5)*i,cc.v2(e,t)},createCancer:function(){var e=null;(e=this.cancerPool.size()>0?this.cancerPool.get():cc.instantiate(this.cancer)).parent=this.node;var t=this.getCancerPosition();e.setPosition(t)},onCancerKilled:function(e){this.cancerPool.put(e)},removeAllCancer:function(){for(var e=this.node.children,t=e.length-1;t>=0;t--){e[t].getComponent("cancer")&&this.onCancerKilled(e[t])}},getCancer2Position:function(){var e,t=this.node.y+Math.random()*this.node.height/2,i=this.node.width;return e=(Math.random()-.5)*i,cc.v2(e,t)},createCancer2:function(){var e=null;(e=this.cancer2Pool.size()>0?this.cancer2Pool.get():cc.instantiate(this.cancer2)).parent=this.node;var t=this.getCancer2Position();e.setPosition(t)},onCancer2Killed:function(e){this.cancer2Pool.put(e)},removeAllCancer2:function(){for(var e=this.node.children,t=e.length-1;t>=0;t--){e[t].getComponent("cancer2")&&this.onCancer2Killed(e[t])}},gainScore:function(e){this.score+=e,this.scoreDisplay.string=this.score.toString()},getScore:function(){return parseInt(this.scoreDisplay.string)},updateScore:function(){var e=this.scoreDisplay.string,t={score:e},i=cc.sys.localStorage.getItem("score"),n=cc.sys.localStorage.getItem("topScore");(!n||parseInt(n)<parseInt(e))&&cc.sys.localStorage.setItem("topScore",e),i?((i=JSON.parse(i))instanceof Array||(i=[]),i.unshift(t)):(i=[]).unshift(t),cc.sys.localStorage.setItem("currentScore",e),cc.sys.localStorage.setItem("score",JSON.stringify(i))},gameOver:function(){this.updateScore(),cc.director.loadScene("over"),cc.audioEngine.stop(this.current)},update:function(e){this.setBg(),this.setHero(),this.bulletTime++,15==this.bulletTime&&(this.bulletTime=0,this.createBullet()),this.cancerTime++,35==this.cancerTime&&(this.cancerTime=0,this.createCancer()),this.cancer2Time++,120==this.cancer2Time&&(this.cancer2Time=0,this.createCancer2())}}),cc._RF.pop()},{}],hero:[function(e,t,i){"use strict";cc._RF.push(t,"49eacWJkAJLvKcIuFabMPT0","hero"),cc.Class({extends:cc.Component,properties:{hdiem:{default:null,type:cc.AudioClip}},onLoad:function(){},onCollisionEnter:function(e,t){return 2==e.tag?(this.getComponent(cc.Animation).play("hdie"),cc.audioEngine.playEffect(this.hdiem,!1),void game.gameOver(this.node)):3==e.tag?(this.getComponent(cc.Animation).play("hdie"),cc.audioEngine.playEffect(this.hdiem,!1),void game.gameOver(this.node)):void 0},onFinished:function(){this.node.destroy()},update:function(e){}}),cc._RF.pop()},{}],over:[function(e,t,i){"use strict";cc._RF.push(t,"57257s11YJAxLzwmyh7jOt5","over"),cc.Class({extends:cc.Component,properties:{currentScore:cc.Label,topScore:cc.Label,wxSubContextView:cc.Node,rankname:cc.Node,rank:cc.Button},onLoad:function(){var e=cc.sys.localStorage.getItem("topScore");this.topScore.string=e;var t=cc.sys.localStorage.getItem("currentScore");this.currentScore.string=t,this.passiveShare(),this.initUserInfoButton(),this.wxSubContextView.active=!1,this.rankname.active=!1,this.rank.node.on("click",this.showRank,this)},showRank:function(){if("undefined"!=typeof wx){this.wxSubContextView.active=!0,this.rankname.active=!0;var e=cc.sys.localStorage.getItem("topScore");wx.getOpenDataContext().postMessage({message:e})}},clickBtn:function(e,t){if("home"==t)cc.director.loadScene("ready");else if("share"==t){if("undefined"==typeof wx)return;var i=cc.sys.localStorage.getItem("currentScore");wx.shareAppMessage({title:"\u7070\u4e86\u4e2a\u673a\uff0c\u8fd9\u6b21\u6211\u83b7\u5f97\u4e86"+i+"\u5206\uff0c\u6765\u8ddf\u6211\u4e00\u8f83\u9ad8\u4e0b\u5427",imageUrl:canvas.toTempFilePathSync({width:720,height:576,destWidth:500,destHeight:400})})}else if("again"==t)cc.director.loadScene("play");else if("close"==t)this.wxSubContextView.active=!1,this.rankname.active=!1,wx.getOpenDataContext().postMessage({message:"clear"});else if("guang2"==t){if(window.location.href="http://www.baidu.com","undefined"==typeof wx)return;wx.navigateToMiniProgram({appId:"wx1234",path:"",extraData:{foo:"bar"},envVersion:"release",success:function(e){}})}},passiveShare:function(){if("undefined"!=typeof wx){wx.showShareMenu({success:function(e){console.log("\u5f00\u542f\u88ab\u52a8\u8f6c\u53d1\u6210\u529f\uff01")},fail:function(e){console.log(e),console.log("\u5f00\u542f\u88ab\u52a8\u8f6c\u53d1\u5931\u8d25\uff01")}});var e=cc.sys.localStorage.getItem("currentScore");wx.onShareAppMessage(function(){return{title:"\u7070\u4e86\u4e2a\u673a\uff0c\u8fd9\u6b21\u6211\u83b7\u5f97\u4e86"+e+"\u5206\uff0c\u6765\u8ddf\u6211\u4e00\u8f83\u9ad8\u4e0b\u5427",imageUrl:canvas.toTempFilePathSync({width:720,height:576,destWidth:500,destHeight:400})}})}},initUserInfoButton:function(){if("undefined"!=typeof wx){var e=wx.getSystemInfoSync(),t=e.windowWidth,i=e.windowHeight,n=wx.createUserInfoButton({type:"text",text:"",style:{left:0,top:0,width:t,height:i,lineHeight:40,backgroundColor:"#00000000",color:"#00000000",textAlign:"center",fontSize:10,borderRadius:4}});n.onTap(function(e){e.userInfo?console.log("\u6388\u6743\u6210\u529f\uff01"):console.log("\u6388\u6743\u5931\u8d25\uff01"),n.hide(),n.destroy()})}},update:function(e){}}),cc._RF.pop()},{}],start:[function(e,t,i){"use strict";cc._RF.push(t,"9fe21R7Mv9JSrUxflmWShKj","start"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){cc.loader.downloader.loadSubpackage("animation",function(e){if(e)return console.error(e);console.log("load subpackage successfully.")})},clickBtn:function(e,t){if("start"==t)cc.director.loadScene("play");else if("love"==t){if(window.location.href="https://love-github-io.pages.dev/","undefined"==typeof wx)return;wx.navigateToMiniProgram({appId:"wx40538bc553de45ac",path:"",extraData:{foo:"bar"},envVersion:"release",success:function(e){}})}else if("guang"==t){if(window.location.href="http://www.baidu.com","undefined"==typeof wx)return;wx.navigateToMiniProgram({appId:"wx1234",path:"",extraData:{foo:"bar"},envVersion:"release",success:function(e){}})}},update:function(e){}}),cc._RF.pop()},{}]},{},["bullet","cancer","cancer2","game","hero","over","start"]);